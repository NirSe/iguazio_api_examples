{"paragraphs":[{"title":"Run simple hadoop ls command using Shell to display all folders in bigdata container ","text":"%sh\n\nhadoop fs -ls v3io://bigdata/\n","user":"admin","dateUpdated":"2018-09-02T15:34:11+0300","config":{"tableHide":true,"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false,"completionKey":"TAB"},"editorMode":"ace/mode/sh","colWidth":11,"title":true,"results":{"0":{"graph":{"mode":"table","height":114,"optionOpen":false}}},"enabled":true,"fontSize":9,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 13 items\ndrwxr-xr-x   - iguazio iguazio          0 2018-08-30 12:26 v3io://bigdata/QuasiMonteCarlo_1535621202010_390212002\ndrwxr-xr-x   - iguazio iguazio          0 2018-08-30 12:27 v3io://bigdata/QuasiMonteCarlo_1535621234237_912590579\ndrwxr-xr-x   - iguazio iguazio          0 2018-08-30 13:00 v3io://bigdata/QuasiMonteCarlo_1535623224812_1223836399\ndrwxr-xr-x   - iguazio iguazio          0 2018-08-30 13:16 v3io://bigdata/QuasiMonteCarlo_1535624217642_1503138020\ndrwxrwxrwx   - iguazio iguazio          0 2018-09-02 09:59 v3io://bigdata/data.csv\ndrwxr-xr-x   - iguazio iguazio          0 2018-08-22 17:26 v3io://bigdata/home\ndrwxr-xr-x   - iguazio iguazio          0 2018-09-02 10:11 v3io://bigdata/mydata.csv\ndrwxrwxrwx   - iguazio iguazio          0 2018-08-30 16:11 v3io://bigdata/players\ndrwxrwxrwx   - iguazio iguazio          0 2018-09-02 15:31 v3io://bigdata/spark-history\ndrwxrwxr-x   - iguazio iguazio          0 2018-08-30 13:51 v3io://bigdata/taxi_streaming_example\ndrwxrwxrwx   - iguazio iguazio          0 2018-08-30 14:39 v3io://bigdata/tmp\ndrwxr-xr-x   - iguazio iguazio          0 2018-08-30 13:37 v3io://bigdata/user\ndrwxr-xr-x   - iguazio iguazio          0 2018-09-02 15:26 v3io://bigdata/zeppelin_example\n"}]},"apps":[],"jobName":"paragraph_1535543973301_962284735","id":"20170531-085610_156030449","dateCreated":"2018-08-29T14:59:33+0300","dateStarted":"2018-09-02T15:32:06+0300","dateFinished":"2018-09-02T15:32:08+0300","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:12723"},{"title":"Create sample data using DataFrame and store it in Iguazio as csv files ","text":"%spark\n\nimport org.apache.spark.sql._\nimport org.apache.spark.sql.types._\n\n// Create sample data\nval myPlayers = Seq(\n    Row(23, \"Michael\" ,\"Jordan\"), \n    Row(33, \"Larry\" ,\"Bird\"), \n    Row(32, \"Magic\" ,\"Johnson\")\n)\n\n// Create sample schema\nval mySchema = List(\n    StructField(\"ID\", IntegerType, true),\n    StructField(\"first_name\", StringType, true),\n    StructField(\"last_name\", StringType, true)\n)\n\n// create dataframe from sample data and schema\nval myDF = spark.createDataFrame(\n  spark.sparkContext.parallelize(myPlayers),\n  StructType(mySchema)\n)\n\n// Show data in dataframe\nmyDF.show()\n\n// Store dataframe in iguazio in /zeppelin_exampl/players_csv folder of bigdata container\n// Note multiple csv files are generated as spark runs multiple executers\nmyDF.write.format(\"csv\").mode(SaveMode.Overwrite).option(\"header\", \"true\").save(\"v3io://bigdata/zeppelin_example/players_csv\")\n\n","user":"admin","dateUpdated":"2018-09-02T15:34:11+0300","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","title":true,"editorHide":false,"tableHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.sql._\nimport org.apache.spark.sql.types._\nmyPlayers: Seq[org.apache.spark.sql.Row] = List([23,Michael,Jordan], [33,Larry,Bird], [32,Magic,Johnson])\nmySchema: List[org.apache.spark.sql.types.StructField] = List(StructField(ID,IntegerType,true), StructField(first_name,StringType,true), StructField(last_name,StringType,true))\nmyDF: org.apache.spark.sql.DataFrame = [ID: int, first_name: string ... 1 more field]\n+---+----------+---------+\n| ID|first_name|last_name|\n+---+----------+---------+\n| 23|   Michael|   Jordan|\n| 33|     Larry|     Bird|\n| 32|     Magic|  Johnson|\n+---+----------+---------+\n\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://poc504-master:4041/jobs","http://poc504-master:4041/jobs","http://poc504-master:4041/jobs","http://poc504-master:4041/jobs"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1535632713152_-1208779353","id":"20180830-153833_1190187705","dateCreated":"2018-08-30T15:38:33+0300","dateStarted":"2018-09-02T10:43:03+0300","dateFinished":"2018-09-02T10:43:07+0300","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:12724"},{"title":"Read sample CSV files and store it as Iguazio KV","text":"%spark\n\nimport org.apache.spark.sql.SaveMode\n\n// Read the sample csv file into dataframe\nval myDF = spark.read.format(\"csv\").option(\"header\", \"true\").load(\"v3io://bigdata/zeppelin_example/players_csv/\")\n\n// Write the datafrmae as iguazio KV by specifiying format \"io.iguaz.v3io.spark.sql.kv\"\n// ID attribute will be used as key\n// Data is written to /zeppelin_example/players_kv folder of bigdata container\nmyDF.write.format(\"io.iguaz.v3io.spark.sql.kv\").mode(SaveMode.Append).option(\"key\", \"ID\").save(\"v3io://bigdata/zeppelin_example/players_kv\")\n\n// Show schema of dataframe\nmyDF.printSchema()\n\n// Create SparkSQL view for the data called players_table\nmyDF.createOrReplaceTempView(\"players_table\")\n\n","user":"admin","dateUpdated":"2018-09-02T15:34:11+0300","config":{"tableHide":true,"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","colWidth":12,"title":true,"results":{},"enabled":true,"fontSize":9,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.sql.SaveMode\nmyDF: org.apache.spark.sql.DataFrame = [ID: string, first_name: string ... 1 more field]\nroot\n |-- ID: string (nullable = true)\n |-- first_name: string (nullable = true)\n |-- last_name: string (nullable = true)\n\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://poc504-master:4041/jobs","http://poc504-master:4041/jobs"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1535543973305_-858528410","id":"20180530-134241_499121492","dateCreated":"2018-08-29T14:59:33+0300","dateStarted":"2018-09-02T10:58:30+0300","dateFinished":"2018-09-02T10:58:33+0300","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:12725"},{"title":"Use Spark SQL to easily select the data","text":"%spark\n\n//Use Spark SQL to execute query on players_table\nval sqlDF = spark.sql(\"select id,count(*) from players_table group by id\")\n\n// Show query result\nsqlDF.show(10)","user":"admin","dateUpdated":"2018-09-02T15:34:11+0300","config":{"tableHide":true,"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","colWidth":12,"title":true,"results":{},"enabled":true,"fontSize":9,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"sqlDF: org.apache.spark.sql.DataFrame = [id: string, count(1): bigint]\n+---+--------+\n| id|count(1)|\n+---+--------+\n| 23|       1|\n| 33|       1|\n| 32|       1|\n+---+--------+\n\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://poc504-master:4041/jobs","http://poc504-master:4041/jobs","http://poc504-master:4041/jobs","http://poc504-master:4041/jobs","http://poc504-master:4041/jobs"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1535543973306_882048308","id":"20180530-134533_2077552445","dateCreated":"2018-08-29T14:59:33+0300","dateStarted":"2018-09-02T10:59:28+0300","dateFinished":"2018-09-02T10:59:30+0300","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:12726"},{"title":"SQL interface to access data","text":"%sql\nselect first_name,last_name from players_table\n \n","user":"admin","dateUpdated":"2018-09-02T15:34:11+0300","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","colWidth":12,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"multiBarChart":{"stacked":false},"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"first_name":"string","last_name":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{},"keys":[{"name":"lat","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"lon","index":1,"aggr":"sum"}]},"helium":{}}},"enabled":true,"fontSize":9,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"first_name\tlast_name\nMichael\tJordan\nMagic\tJohnson\nLarry\tBird\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://poc504-master:4041/jobs","http://poc504-master:4041/jobs"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1535543973307_1751653956","id":"20180531-173242_263092943","dateCreated":"2018-08-29T14:59:33+0300","dateStarted":"2018-09-02T11:03:36+0300","dateFinished":"2018-09-02T11:03:36+0300","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:12727"},{"title":"Read from Iguazio KV and wrote to Iguazio in Parquet format","text":"%spark\n\n// Read the kv data into dataframe\nval pqDF = spark.read.format(\"io.iguaz.v3io.spark.sql.kv\").load(\"v3io://bigdata/zeppelin_example/players_kv\")\n\n// Write the kv data to Iguazio in Parquet format\npqDF.write.format(\"parquet\").mode(SaveMode.Append).save(\"v3io://bigdata/zeppelin_example/players_pq\")\n","user":"admin","dateUpdated":"2018-09-02T15:34:11+0300","config":{"tableHide":true,"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","colWidth":12,"title":true,"results":{},"enabled":true,"fontSize":9,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"pqDF: org.apache.spark.sql.DataFrame = [ID: string, first_name: string ... 1 more field]\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://poc504-master:4041/jobs"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1535543973307_1148954594","id":"20170530-144529_1722628679","dateCreated":"2018-08-29T14:59:33+0300","dateStarted":"2018-09-02T15:26:54+0300","dateFinished":"2018-09-02T15:26:56+0300","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:12728"},{"title":"Display all folders of /zeppelin_example in bigdata container","text":"%sh\n\nhadoop fs -ls v3io://bigdata/zeppelin_example","user":"admin","dateUpdated":"2018-09-02T15:34:11+0300","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"results":{},"enabled":true,"fontSize":9,"title":true,"tableHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 5 items\ndrwxr-xr-x   - iguazio iguazio          0 2018-09-02 10:24 v3io://bigdata/zeppelin_example/mydata.csv\ndrwxr-xr-x   - iguazio iguazio          0 2018-09-02 10:42 v3io://bigdata/zeppelin_example/players_csv\ndrwxrwxrwx   - iguazio iguazio          0 2018-09-02 10:43 v3io://bigdata/zeppelin_example/players_kv\ndrwxrwxrwx   - iguazio iguazio          0 2018-09-02 11:04 v3io://bigdata/zeppelin_example/players_part_kv\ndrwxr-xr-x   - iguazio iguazio          0 2018-09-02 15:26 v3io://bigdata/zeppelin_example/players_pq\n"}]},"apps":[],"jobName":"paragraph_1535543973307_-1960900627","id":"20180603-164632_1138465582","dateCreated":"2018-08-29T14:59:33+0300","dateStarted":"2018-09-02T15:30:51+0300","dateFinished":"2018-09-02T15:30:53+0300","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:12729"},{"text":"%sh\n","user":"admin","dateUpdated":"2018-09-02T15:34:11+0300","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/sh","tableHide":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1535891451924_2038106602","id":"20180902-153051_349792782","dateCreated":"2018-09-02T15:30:51+0300","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:12730"}],"name":"Getting Started","id":"2DPKD283V","noteParams":{},"noteForms":{},"angularObjects":{"spark:admin:2DPKD283V":[],"sh:admin:2DPKD283V":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}